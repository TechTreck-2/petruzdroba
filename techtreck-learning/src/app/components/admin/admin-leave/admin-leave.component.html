<div class="admin-tables">
  <button (click)="onToggleList()" class="btn-toggle">Vacations</button>
  <p class="txt-table-title">Pending leave requests</p>
  @if(pendingLeaveRequests.length === 0)
  {
  <p class="txt-none">There are no pending leave requests</p>
  }@else {
  <table class="pending-table">
    <tbody>
      <tr>
        <th>Leave date</th>
        <th>Start time</th>
        <th>End time</th>
        <th>Reason</th>
        <th>Status</th>
        <th>Submitted on</th>
      </tr>
      @for(leave of pendingLeaveRequests; track leave){
      <tr>
        <td>{{leave.date | date: 'mediumDate'}}</td>
        <td>{{leave.startTime | date: 'hh:mm a'}}</td>
        <td>{{leave.endTime | date: 'hh:mm a'}}</td>
        <td>{{leave.description}}</td>
        <td>
          <button class="btn-status deny" (click)="onDeny(leave)" title="Deny">
            <i class="fas fa-times"></i>
            <p>Deny</p>
          </button>
          <button class="btn-status accept" (click)="onAccept(leave)"
            [title]="getValidLeave(leave)? 'Accept':'Insufficient leave time'" [disabled]="!getValidLeave(leave)">
            <i class="fas fa-check"></i>
            <p>Accept</p>
          </button>
        </td>
        <td>{{leave.startTime | date: 'mediumDate'}}</td>
      </tr>
      }
    </tbody>
  </table>
  }

  <p class="txt-table-title">Completed leave requests</p>
  @if(completedLeaveRequests.length === 0)
  {
  <p class="txt-none">No completed leave requests</p>
  }@else {
  <table class="completed-table">
    <tbody>
      <tr>
        <th>Status</th>
        <th>Date</th>
        <th>Start time</th>
        <th>End time</th>
      </tr>
      @for(leave of completedLeaveRequests; track leave){
      <tr>
        <td><i [ngClass]="'fas fa-circle ' + leave.status" [title]="leave.status"></i></td>
        <td>{{leave.date | date: 'longDate'}}</td>
        <td>{{leave.startTime | date: 'hh:mm a'}}</td>
        <td>{{leave.endTime | date: 'hh:mm a'}}</td>
      </tr>
      }
    </tbody>
  </table>
  }
</div>
